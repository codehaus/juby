
*.o : juby.h

juby.o:	juby_jni.h

juby_jni.h: juby.jar
	javah -o juby_jni.h -classpath juby.jar org.rubyhaus.juby.Value org.rubyhaus.juby.Ary

juby_jni.o: juby_jni.h

juby.jar: ./java/org/rubyhaus/juby/Juby.java ./java/org/rubyhaus/juby/Value.java ./java/org/rubyhaus/juby/Ary.java
	javac -source 1.2 -sourcepath ./java ./java/org/rubyhaus/juby/*.java
	cd ./java && jar cvf ../juby.jar org/rubyhaus/juby/*.class


dev: $(DLLIB) juby.jar
	mkdir -p dist/juby
	@$(INSTALL_PROG) $(DLLIB) dist
	@$(INSTALL_DATA) $(srcdir)/lib/juby/juby.rb dist/juby                                                                                                                                                      
	@$(INSTALL_PROG) juby.jar dist

clean: jniclean javaclean devclean

jniclean:
	rm -f ./juby_jni.h

javaclean:
	rm -f ./juby.jar
	rm -f ./java/org/rubyhaus/juby/*.class

devclean:
	rm -Rf dist
